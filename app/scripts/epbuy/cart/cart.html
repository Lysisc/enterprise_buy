<ion-view title="购物车" class="ep-cart">

    <ion-content>

        <div class="goods-list">
            <div class="goods-item" ng-if="!item.removed" ng-class="{'has-chosen':item.checked == {{$index}},'check-delete':moreGoodsChoos,leave:item.removing}" ng-repeat="item in shoppingCartList track by $index">
                <label class="checkbox">
                    <input type="checkbox" ng-click="hasChosenItem($event,$index);" ng-checked="!moreGoodsChoos"></label>
                <div class="img">
                    <img ng-src="{{item.ImgUrl}}"></div>
                <div class="detail">
                    <span class="red">&yen;{{item.Price}}</span>
                    <h3>{{item.Title}}</h3>
                    <p class="text">{{item.Note}}</p>
                    <div class="number-ctrl"> <i class="icon ion-remove" ng-if="item.Num > 1" ng-click="item.Num = item.Num - 1;totalNumber(item.Price);"></i> <i class="icon ion-add" ng-if="item.Num < item.Limit" ng-click="item.Num = item.Num + 1;totalNumber(item.Price,true);"></i>
                        <span class="delete" ng-if="item.Num == 1 && !moreGoodsChoos" ng-click="deleteGoods($index+'|');">删除</span>
                        <span class="most" ng-if="item.Num == item.Limit">限购{{item.Limit}}件</span>
                        <span class="num">{{item.Num}}</span>
                    </div>
                </div>
            </div>
        </div>

    </ion-content>

    <div class="order-info">
        <p>
            商品数量：
            <span class="red">{{cartNum}}件</span>
        </p>
        <p>
            订单金额：
            <span class="b-red">&yen;{{cartPrice}}</span>
            (不含运费)
        </p>
        <a ng-click="goOrder();">下 单</a>
    </div>

    <bottom-bar></bottom-bar>

</ion-view>

<ion-nav-buttons side="right">
    <a ng-click="deleteMoreGoods($event);" class="ep-edit">编辑</a>
</ion-nav-buttons>